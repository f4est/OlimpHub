# OlimpHub – Платформа для проведения олимпиад

OlimpHub - это платформа для проведения предметных олимпиад и соревнований, разработанная на Django. Система позволяет преподавателям создавать олимпиады, добавлять задания, а студентам - регистрироваться и участвовать в соревнованиях, отправлять решения.

## Основные возможности

* **Роли пользователей**: Студент, Преподаватель, Администратор
* **Управление олимпиадами**: создание, редактирование, добавление заданий
* **Автоматическое обновление статусов** соревнований (Предстоящие, Активные, Завершенные)
* **Система регистрации** участников на соревнования
* **Отправка решений** с возможностью проверки преподавателями
* **Таблица результатов** для каждой олимпиады
* **Профиль пользователя** с информацией о достижениях и возможностью загрузки аватарки
* **Административная панель** для управления системой
* **Демо-данные** для быстрого старта системы с примерами соревнований и заданий

## Технологическая база

* Django 5.0
* Bootstrap 5 (интерфейс)
* Plotly (графики и аналитика)
* Django Widget Tweaks (улучшение форм)
* Django Cleanup (автоматическая очистка файлов)
* Django Debug Toolbar (для разработки)
* Pillow (работа с изображениями)
* Python-dotenv (управление переменными окружения)
* Pytest (тестирование)
* Coverage (анализ покрытия кода тестами)

## Структура проекта

### Модели данных

* **UserProfile** - профиль пользователя с ролью (Студент, Преподаватель, Администратор)
* **Olympiad** - олимпиада/соревнование с автоматическим обновлением статуса
* **Problem** - задания для олимпиад
* **Enrollment** - регистрация участников на олимпиады
* **Submission** - отправленные решения и их оценки

### Маршруты и представления

#### Главная страница и олимпиады
* `GET /` - главная страница со списком олимпиад
* `GET /olympiad/<int:pk>/` - детальная страница олимпиады
* `GET /olympiad/<int:pk>/tasks/` - просмотр заданий олимпиады
* `GET /olympiad/<int:pk>/scoreboard/` - таблица результатов олимпиады
* `GET /olympiad/create/` - создание новой олимпиады (только для преподавателей)
* `GET,POST /olympiad/<int:pk>/edit/` - редактирование олимпиады (только для создателя или админа)
* `POST /olympiad/<int:pk>/enroll/` - запись на соревнование

#### Задания и решения
* `GET,POST /olympiad/<int:olympiad_id>/problem/create/` - создание задания
* `GET,POST /problem/<int:pk>/edit/` - редактирование задания
* `GET,POST /problem/<int:pk>/delete/` - удаление задания
* `POST /submit/<int:problem_id>/` - отправка решения задачи

#### Аутентификация и профиль
* `GET,POST /signup/` - регистрация нового пользователя
* `GET,POST /login/` - вход в систему
* `GET,POST /logout/` - выход из системы
* `GET /profile/` - профиль пользователя
* `GET,POST /profile/edit/` - редактирование профиля

#### Административные функции
* `GET /admin/users/` - список пользователей (только для админов)
* `GET,POST /admin/users/create/` - создание пользователя админом
* `GET,POST /admin/users/<int:pk>/edit/` - редактирование пользователя админом
* `GET /admin-dashboard/` - административная панель с мониторингом
* `POST /admin-dashboard/update-statuses/` - обновление статусов олимпиад
* `GET /api/auto-update-statuses/` - API для автоматического обновления статусов

### Статические страницы
* `GET /about/` - информация о платформе
* `GET /contacts/` - контактная информация

## Инструкция по запуску проекта

### Требования
* Python 3.9+
* Django 5.0+
* Все зависимости из requirements.txt

### Шаги установки и запуска

1. **Клонирование репозитория**
   ```bash
   git clone <url-репозитория>
   cd OlimpHub
   ```

2. **Создание виртуального окружения**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   ```

3. **Установка зависимостей**
   ```bash
   pip install -r requirements.txt
   ```

4. **Применение миграций**
   ```bash
   python manage.py migrate
   ```

5. **Создание суперпользователя**
   ```bash
   python manage.py createsuperuser
   ```

6. **Создание демо-данных (опционально)**
   ```bash
   python manage.py shell -c "from scripts.create_demo_data import create_demo_data; create_demo_data()"
   ```

7. **Запуск сервера разработки**
   ```bash
   python manage.py runserver
   ```

8. **Открыть в браузере**
   ```
   http://127.0.0.1:8000/
   ```

### Начальная настройка

1. **Создание ролей пользователей**
   * Войдите в Django-админку: `http://127.0.0.1:8000/admin/`
   * Создайте пользователей с разными ролями (студент, преподаватель, администратор)

2. **Создание олимпиад**
   * Войдите как преподаватель и создайте олимпиаду через интерфейс
   * Добавьте задания в созданную олимпиаду

3. **Участие в олимпиаде**
   * Войдите как студент
   * Зарегистрируйтесь на доступную олимпиаду
   * Отправляйте решения заданий

## Последние обновления

### Версия 1.1.0
* Улучшена система загрузки аватарок пользователей
* Добавлена возможность быстрого заполнения базы демо-данными
* Исправлена проблема с отправкой заданий
* Улучшен пользовательский интерфейс
* Добавлены скрипты для автоматизации создания тестовых данных
* Фиксация блоков информации при скроллинге

### Версия 1.0.0
* Первый стабильный релиз
* Базовый функционал управления олимпиадами
* Система регистрации и авторизации
* Отправка и проверка решений
* Административная панель

## Мониторинг системы

Для административного мониторинга доступна панель по адресу `/admin-dashboard/`, где администраторы могут:

* Отслеживать статистику пользователей
* Контролировать количество олимпиад и их статусы
* Мониторить решения и их оценки
* Анализировать активность пользователей через графики и диаграммы
* Управлять статусами олимпиад

## Тестирование

Проект включает набор тестов, которые можно запустить командой:

```bash
pytest
```

Для анализа покрытия кода тестами:

```bash
coverage run -m pytest
coverage report
```

## Структура директорий

```
OlimpHub/
├── core/                 # Основное приложение
├── media/                # Загруженные файлы (аватары, задания, решения)
│   ├── avatars/          # Аватары пользователей
│   ├── solutions/        # Решения участников
│   └── statements/       # Файлы с заданиями
├── olimphub_project/     # Настройки проекта
├── olympiad/             # Приложение для олимпиад
├── scripts/              # Скрипты для заполнения демо-данными
├── static/               # Статические файлы (CSS, JS, изображения)
├── submissions/          # Приложение для отправки и проверки решений
├── templates/            # HTML-шаблоны
├── venv/                 # Виртуальное окружение
├── .gitignore            # Исключения для Git
├── manage.py             # Скрипт управления Django
├── Procfile              # Настройки для деплоя
├── README.md             # Документация
└── requirements.txt      # Зависимости проекта
```