{% extends "admin/base.html" %}
{% load i18n static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static "admin/css/login.css" %}">
<style>
  body {
    background: #121212;
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  
  .login #container {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    width: 28em;
    max-width: 100%;
    margin: 100px auto;
    padding: 30px;
  }
  
  .login-header {
    text-align: center;
    margin-bottom: 25px;
  }
  
  .login-header h1 {
    font-size: 24px;
    margin: 0 0 5px 0;
  }
  
  .login #content {
    background: transparent;
  }
  
  .form-row {
    padding: 10px 0;
  }
  
  .form-row label {
    display: block;
    margin-bottom: 5px;
  }
  
  .form-row input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-sizing: border-box;
  }
  
  .submit-row {
    padding: 20px 0 0 0;
    margin: 0;
    text-align: center;
  }
  
  .submit-row input {
    width: 100%;
    padding: 10px;
    background: #2962ff;
    color: white;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
  }
  
  .back-link {
    display: block;
    text-align: center;
    margin-top: 20px;
    color: white;
    text-decoration: none;
  }
</style>
{% endblock %}

{% block bodyclass %}login{% endblock %}

{% block usertools %}{% endblock %}
{% block nav-global %}{% endblock %}
{% block nav-sidebar %}{% endblock %}
{% block content_title %}{% endblock %}
{% block breadcrumbs %}{% endblock %}
{% block header %}{% endblock %}

{% block content %}
<div id="content" class="colM">
  <div id="container">
    <div class="login-header">
      <h1>Вход в систему</h1>
      <p>Панель администратора OlimpHub</p>
    </div>
    
    {% if form.errors and not form.non_field_errors %}
    <p class="errornote">
    {% if form.errors.items|length == 1 %}
      Пожалуйста, исправьте ошибку ниже.
    {% else %}
      Пожалуйста, исправьте ошибки ниже.
    {% endif %}
    </p>
    {% endif %}
    
    {% if form.non_field_errors %}
    {% for error in form.non_field_errors %}
    <p class="errornote">
      {{ error }}
    </p>
    {% endfor %}
    {% endif %}
    
    <div id="content-main">
      {% if user.is_authenticated %}
      <p class="errornote">
        Вы аутентифицированы как {{ username }}, но не имеете необходимых прав для доступа к этой странице.
        Хотите войти с другой учетной записью?
      </p>
      {% endif %}
    
      <form action="{{ app_path }}" method="post" id="login-form">{% csrf_token %}
        <div class="form-row">
          {{ form.username.errors }}
          {{ form.username.label_tag }} {{ form.username }}
        </div>
        <div class="form-row">
          {{ form.password.errors }}
          {{ form.password.label_tag }} {{ form.password }}
          <input type="hidden" name="next" value="{{ next }}">
        </div>
        <div class="submit-row">
          <input type="submit" value="Войти">
        </div>
      </form>
    </div>
  </div>
</div>
<a href="{% url 'index' %}" class="back-link">← Вернуться на главную</a>
{% endblock %}